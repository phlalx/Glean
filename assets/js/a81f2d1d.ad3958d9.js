"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[642],{3905:function(e,n,t){t.r(n),t.d(n,{MDXContext:function(){return m},MDXProvider:function(){return u},mdx:function(){return h},useMDXComponents:function(){return d},withMDXComponents:function(){return s}});var r=t(67294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(){return o=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(this,arguments)}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var m=r.createContext({}),s=function(e){return function(n){var t=d(n.components);return r.createElement(e,o({},n,{components:t}))}},d=function(e){var n=r.useContext(m),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},u=function(e){var n=d(e.components);return r.createElement(m.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},f=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),s=d(t),u=a,f=s["".concat(l,".").concat(u)]||s[u]||p[u]||o;return t?r.createElement(f,i(i({ref:n},m),{},{components:t})):r.createElement(f,i({ref:n},m))}));function h(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,l=new Array(o);l[0]=f;var i={};for(var c in n)hasOwnProperty.call(n,c)&&(i[c]=n[c]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var m=2;m<o;m++)l[m]=t[m];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}f.displayName="MDXCreateElement"},12038:function(e,n,t){t.d(n,{EO:function(){return i},O1:function(){return l},Rr:function(){return c}});var r,a=t(67294),o=t(44256);function l(e){return a.createElement("a",{href:r+e.file},e.file)}function i(e){return a.createElement("a",{href:r+e.file},e.children)}r=(0,o.isInternal)()?"https://www.internalfb.com/code/fbsource/fbcode/":"https://github.com/facebookincubator/Glean/tree/master/";var c=function(e){e.children;var n=e.internal,t=e.external;return(0,o.fbContent)({internal:a.createElement("code",null,n),external:a.createElement("code",null,t)})}},66574:function(e,n,t){t.r(n),t.d(n,{contentTitle:function(){return m},default:function(){return p},frontMatter:function(){return c},metadata:function(){return s},toc:function(){return d}});var r=t(87462),a=t(63366),o=(t(67294),t(3905)),l=t(12038),i=["components"],c={id:"workflow",title:"Workflow",sidebar_label:"Workflow"},m=void 0,s={unversionedId:"schema/workflow",id:"schema/workflow",isDocsHomePage:!1,title:"Workflow",description:"Where is the schema defined?",source:"@site/docs/schema/workflow.md",sourceDirName:"schema",slug:"/schema/workflow",permalink:"/docs/schema/workflow",editUrl:"https://github.com/facebookincubator/Glean/tree/main/glean/website/docs/schema/workflow.md",tags:[],version:"current",frontMatter:{id:"workflow",title:"Workflow",sidebar_label:"Workflow"},sidebar:"someSidebar",previous:{title:'The special "all" schema',permalink:"/docs/schema/all"},next:{title:"Thrift and JSON",permalink:"/docs/schema/thrift"}},d=[{value:"Where is the schema defined?",id:"where-is-the-schema-defined",children:[],level:2},{value:"Thrift types generated from the schema",id:"thrift-types-generated-from-the-schema",children:[],level:2},{value:"Experimenting with schemas",id:"experimenting-with-schemas",children:[],level:2}],u={toc:d};function p(e){var n=e.components,t=(0,a.Z)(e,i);return(0,o.mdx)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h2",{id:"where-is-the-schema-defined"},"Where is the schema defined?"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Source code: ",(0,o.mdx)(l.O1,{file:"glean/schema/source",mdxType:"SrcFile"}))),(0,o.mdx)("h2",{id:"thrift-types-generated-from-the-schema"},"Thrift types generated from the schema"),(0,o.mdx)("p",null,"The schema is compiled into Thrift files and language-specific support code, which can be used directly by clients for querying Glean. This means that you can query Glean using native types and data structures in whatever language you're using."),(0,o.mdx)("p",null,"The Thrift files are generated by"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"make gen-schema\n")),(0,o.mdx)("p",null,"In the root of the Glean repository.  This puts files in\n",(0,o.mdx)("inlineCode",{parentName:"p"},"glean/schema/thrift"),", which are then processed into Haskell code by"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"make thrift-schema-hs\n")),(0,o.mdx)("p",null,"and finally built by"),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre"},"make glean\n")),(0,o.mdx)("p",null,"Examples of code using these types:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Haskell: ",(0,o.mdx)(l.O1,{file:"glean/client/hs/example/Example.hs",mdxType:"SrcFile"}))),(0,o.mdx)("h2",{id:"experimenting-with-schemas"},"Experimenting with schemas"),(0,o.mdx)("ol",null,(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Modify the source files in ",(0,o.mdx)(l.O1,{file:"glean/schema/source",mdxType:"SrcFile"}))),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Start up the shell locally using your schema:",(0,o.mdx)("br",null),"\n",(0,o.mdx)("inlineCode",{parentName:"p"},"glean shell --db-root ~/local/gleandb --schema glean/schema/source"),(0,o.mdx)("br",null),"\nIf you don't already have a ",(0,o.mdx)("inlineCode",{parentName:"p"},"~/local/gleandb")," for storing local DBs, create it with ",(0,o.mdx)("inlineCode",{parentName:"p"},"mkdir ~/local/gleandb"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Test it with some example data: see ",(0,o.mdx)("a",{parentName:"p",href:"/docs/write#loading-a-db-from-json-in-the-shell"},"Loading a DB from JSON in the shell"),".")),(0,o.mdx)("li",{parentName:"ol"},(0,o.mdx)("p",{parentName:"li"},"Iterate as necessary, using ",(0,o.mdx)("inlineCode",{parentName:"p"},":reload")," in the shell to reload the schema."))))}p.isMDXComponent=!0}}]);